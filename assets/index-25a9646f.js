(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const r of l.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function n(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(i){if(i.ep)return;i.ep=!0;const l=n(i);fetch(i.href,l)}})();const N={};function Ae(e){N.context=e}const Ce=(e,t)=>e===t,xe=Symbol("solid-track"),V={equals:Ce};let ae=ge;const _=1,W=2,de={owned:null,cleanups:null,context:null,owner:null},z={};var C=null;let M=null,g=null,x=null,E=null,ie=0;function G(e,t){const n=g,s=C,i=e.length===0,l=i?de:{owned:null,cleanups:null,context:null,owner:t===void 0?s:t},r=i?e:()=>e(()=>q(()=>X(l)));C=l,g=null;try{return j(r,!0)}finally{g=n,C=s}}function I(e,t){t=t?Object.assign({},V,t):V;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},s=i=>(typeof i=="function"&&(i=i(n.value)),pe(n,i));return[he.bind(n),s]}function re(e,t,n){const s=Q(e,t,!0,_);D(s)}function te(e,t,n){const s=Q(e,t,!1,_);D(s)}function ve(e,t,n){ae=Oe;const s=Q(e,t,!1,_);s.user=!0,E?E.push(s):D(s)}function U(e,t,n){n=n?Object.assign({},V,n):V;const s=Q(e,t,!0,0);return s.observers=null,s.observerSlots=null,s.comparator=n.equals||void 0,D(s),he.bind(s)}function ee(e,t,n){let s,i,l;arguments.length===2&&typeof t=="object"||arguments.length===1?(s=!0,i=e,l=t||{}):(s=e,i=t,l=n||{});let r=null,o=z,u=null,c=!1,f="initialValue"in l,y=typeof s=="function"&&U(s);const a=new Set,[d,m]=(l.storage||I)(l.initialValue),[b,T]=I(void 0),[O,v]=I(void 0,{equals:!1}),[h,w]=I(f?"ready":"unresolved");if(N.context){u=`${N.context.id}${N.context.count++}`;let p;l.ssrLoadFrom==="initial"?o=l.initialValue:N.load&&(p=N.load(u))&&(o=p[0])}function $(p,S,A,F){return r===p&&(r=null,f=!0,(p===o||S===o)&&l.onHydrated&&queueMicrotask(()=>l.onHydrated(F,{value:S})),o=z,R(S,A)),S}function R(p,S){j(()=>{S===void 0&&m(()=>p),w(S!==void 0?"errored":"ready"),T(S);for(const A of a.keys())A.decrement();a.clear()},!1)}function P(){const p=Ee,S=d(),A=b();if(A!==void 0&&!r)throw A;return g&&!g.user&&p&&re(()=>{O(),r&&(p.resolved||a.has(p)||(p.increment(),a.add(p)))}),S}function k(p=!0){if(p!==!1&&c)return;c=!1;const S=y?y():s;if(S==null||S===!1){$(r,q(d));return}const A=o!==z?o:q(()=>i(S,{value:d(),refetching:p}));return typeof A!="object"||!(A&&"then"in A)?($(r,A,void 0,S),A):(r=A,c=!0,queueMicrotask(()=>c=!1),j(()=>{w(f?"refreshing":"pending"),v()},!1),A.then(F=>$(A,F,void 0,S),F=>$(A,void 0,ye(F),S)))}return Object.defineProperties(P,{state:{get:()=>h()},error:{get:()=>b()},loading:{get(){const p=h();return p==="pending"||p==="refreshing"}},latest:{get(){if(!f)return P();const p=b();if(p&&!r)throw p;return d()}}}),y?re(()=>k(!1)):k(!1),[P,{refetch:k,mutate:m}]}function q(e){if(g===null)return e();const t=g;g=null;try{return e()}finally{g=t}}function $e(e){return C===null||(C.cleanups===null?C.cleanups=[e]:C.cleanups.push(e)),e}function Ne(e){const t=U(e),n=U(()=>ne(t()));return n.toArray=()=>{const s=n();return Array.isArray(s)?s:s!=null?[s]:[]},n}let Ee;function he(){const e=M;if(this.sources&&(this.state||e))if(this.state===_||e)D(this);else{const t=x;x=null,j(()=>Z(this),!1),x=t}if(g){const t=this.observers?this.observers.length:0;g.sources?(g.sources.push(this),g.sourceSlots.push(t)):(g.sources=[this],g.sourceSlots=[t]),this.observers?(this.observers.push(g),this.observerSlots.push(g.sources.length-1)):(this.observers=[g],this.observerSlots=[g.sources.length-1])}return this.value}function pe(e,t,n){let s=e.value;return(!e.comparator||!e.comparator(s,t))&&(e.value=t,e.observers&&e.observers.length&&j(()=>{for(let i=0;i<e.observers.length;i+=1){const l=e.observers[i],r=M&&M.running;r&&M.disposed.has(l),(r&&!l.tState||!r&&!l.state)&&(l.pure?x.push(l):E.push(l),l.observers&&me(l)),r||(l.state=_)}if(x.length>1e6)throw x=[],new Error},!1)),t}function D(e){if(!e.fn)return;X(e);const t=C,n=g,s=ie;g=C=e,_e(e,e.value,s),g=n,C=t}function _e(e,t,n){let s;try{s=e.fn(t)}catch(i){e.pure&&(e.state=_,e.owned&&e.owned.forEach(X),e.owned=null),we(i)}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?pe(e,s):e.value=s,e.updatedAt=n)}function Q(e,t,n,s=_,i){const l={fn:e,state:s,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:C,context:null,pure:n};return C===null||C!==de&&(C.owned?C.owned.push(l):C.owned=[l]),l}function Y(e){const t=M;if(e.state===0||t)return;if(e.state===W||t)return Z(e);if(e.suspense&&q(e.suspense.inFallback))return e.suspense.effects.push(e);const n=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<ie);)(e.state||t)&&n.push(e);for(let s=n.length-1;s>=0;s--)if(e=n[s],e.state===_||t)D(e);else if(e.state===W||t){const i=x;x=null,j(()=>Z(e,n[0]),!1),x=i}}function j(e,t){if(x)return e();let n=!1;t||(x=[]),E?n=!0:E=[],ie++;try{const s=e();return Te(n),s}catch(s){n||(E=null),x=null,we(s)}}function Te(e){if(x&&(ge(x),x=null),e)return;const t=E;E=null,t.length&&j(()=>ae(t),!1)}function ge(e){for(let t=0;t<e.length;t++)Y(e[t])}function Oe(e){let t,n=0;for(t=0;t<e.length;t++){const s=e[t];s.user?e[n++]=s:Y(s)}for(N.context&&Ae(),t=0;t<n;t++)Y(e[t])}function Z(e,t){const n=M;e.state=0;for(let s=0;s<e.sources.length;s+=1){const i=e.sources[s];i.sources&&(i.state===_||n?i!==t&&Y(i):(i.state===W||n)&&Z(i,t))}}function me(e){const t=M;for(let n=0;n<e.observers.length;n+=1){const s=e.observers[n];(!s.state||t)&&(s.state=W,s.pure?x.push(s):E.push(s),s.observers&&me(s))}}function X(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),s=e.sourceSlots.pop(),i=n.observers;if(i&&i.length){const l=i.pop(),r=n.observerSlots.pop();s<i.length&&(l.sourceSlots[r]=s,i[s]=l,n.observerSlots[s]=r)}}if(e.owned){for(t=0;t<e.owned.length;t++)X(e.owned[t]);e.owned=null}if(e.cleanups){for(t=0;t<e.cleanups.length;t++)e.cleanups[t]();e.cleanups=null}e.state=0,e.context=null}function ye(e){return e instanceof Error||typeof e=="string"?e:new Error("Unknown error")}function we(e){throw e=ye(e),e}function ne(e){if(typeof e=="function"&&!e.length)return ne(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const s=ne(e[n]);Array.isArray(s)?t.push.apply(t,s):t.push(s)}return t}return e}const Le=Symbol("fallback");function fe(e){for(let t=0;t<e.length;t++)e[t]()}function Ie(e,t,n={}){let s=[],i=[],l=[],r=0,o=t.length>1?[]:null;return $e(()=>fe(l)),()=>{let u=e()||[],c,f;return u[xe],q(()=>{let a=u.length,d,m,b,T,O,v,h,w,$;if(a===0)r!==0&&(fe(l),l=[],s=[],i=[],r=0,o&&(o=[])),n.fallback&&(s=[Le],i[0]=G(R=>(l[0]=R,n.fallback())),r=1);else if(r===0){for(i=new Array(a),f=0;f<a;f++)s[f]=u[f],i[f]=G(y);r=a}else{for(b=new Array(a),T=new Array(a),o&&(O=new Array(a)),v=0,h=Math.min(r,a);v<h&&s[v]===u[v];v++);for(h=r-1,w=a-1;h>=v&&w>=v&&s[h]===u[w];h--,w--)b[w]=i[h],T[w]=l[h],o&&(O[w]=o[h]);for(d=new Map,m=new Array(w+1),f=w;f>=v;f--)$=u[f],c=d.get($),m[f]=c===void 0?-1:c,d.set($,f);for(c=v;c<=h;c++)$=s[c],f=d.get($),f!==void 0&&f!==-1?(b[f]=i[c],T[f]=l[c],o&&(O[f]=o[c]),f=m[f],d.set($,f)):l[c]();for(f=v;f<a;f++)f in b?(i[f]=b[f],l[f]=T[f],o&&(o[f]=O[f],o[f](f))):i[f]=G(y);i=i.slice(0,r=a),s=u.slice(0)}return i});function y(a){if(l[f]=a,o){const[d,m]=I(f);return o[f]=m,t(u[f],d)}return t(u[f])}}}function H(e,t){return q(()=>e(t||{}))}function ce(e){const t="fallback"in e&&{fallback:()=>e.fallback};return U(Ie(()=>e.each,e.children,t||void 0))}function Me(e){let t=!1,n=!1;const s=(r,o)=>r[0]===o[0]&&(t?r[1]===o[1]:!r[1]==!o[1])&&r[2]===o[2],i=Ne(()=>e.children),l=U(()=>{let r=i();Array.isArray(r)||(r=[r]);for(let o=0;o<r.length;o++){const u=r[o].when;if(u)return n=!!r[o].keyed,[o,u,r[o]]}return[-1]},void 0,{equals:s});return U(()=>{const[r,o,u]=l();if(r<0)return e.fallback;const c=u.children,f=typeof c=="function"&&c.length>0;return t=n||f,f?q(()=>c(o)):c},void 0,void 0)}function qe(e){return e}function je(e,t,n){let s=n.length,i=t.length,l=s,r=0,o=0,u=t[i-1].nextSibling,c=null;for(;r<i||o<l;){if(t[r]===n[o]){r++,o++;continue}for(;t[i-1]===n[l-1];)i--,l--;if(i===r){const f=l<s?o?n[o-1].nextSibling:n[l-o]:u;for(;o<l;)e.insertBefore(n[o++],f)}else if(l===o)for(;r<i;)(!c||!c.has(t[r]))&&t[r].remove(),r++;else if(t[r]===n[l-1]&&n[o]===t[i-1]){const f=t[--i].nextSibling;e.insertBefore(n[o++],t[r++].nextSibling),e.insertBefore(n[--l],f),t[i]=n[l]}else{if(!c){c=new Map;let y=o;for(;y<l;)c.set(n[y],y++)}const f=c.get(t[r]);if(f!=null)if(o<f&&f<l){let y=r,a=1,d;for(;++y<i&&y<l&&!((d=c.get(t[y]))==null||d!==f+a);)a++;if(a>f-o){const m=t[r];for(;o<f;)e.insertBefore(n[o++],m)}else e.replaceChild(n[o++],t[r++])}else r++;else t[r++].remove()}}}function Re(e,t,n,s={}){let i;return G(l=>{i=l,t===document?e():L(t,e(),t.firstChild?null:void 0,n)},s.owner),()=>{i(),t.textContent=""}}function K(e,t,n){const s=document.createElement("template");s.innerHTML=e;let i=s.content.firstChild;return n&&(i=i.firstChild),i}function L(e,t,n,s){if(n!==void 0&&!s&&(s=[]),typeof t!="function")return J(e,t,s,n);te(i=>J(e,t(),i,n),s)}function J(e,t,n,s,i){for(N.context&&!n&&(n=[...e.childNodes]);typeof n=="function";)n=n();if(t===n)return n;const l=typeof t,r=s!==void 0;if(e=r&&n[0]&&n[0].parentNode||e,l==="string"||l==="number"){if(N.context)return n;if(l==="number"&&(t=t.toString()),r){let o=n[0];o&&o.nodeType===3?o.data=t:o=document.createTextNode(t),n=B(e,n,s,o)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||l==="boolean"){if(N.context)return n;n=B(e,n,s)}else{if(l==="function")return te(()=>{let o=t();for(;typeof o=="function";)o=o();n=J(e,o,n,s)}),()=>n;if(Array.isArray(t)){const o=[],u=n&&Array.isArray(n);if(se(o,t,n,i))return te(()=>n=J(e,o,n,s,!0)),()=>n;if(N.context){if(!o.length)return n;for(let c=0;c<o.length;c++)if(o[c].parentNode)return n=o}if(o.length===0){if(n=B(e,n,s),r)return n}else u?n.length===0?ue(e,o,s):je(e,n,o):(n&&B(e),ue(e,o));n=o}else if(t instanceof Node){if(N.context&&t.parentNode)return n=r?[t]:t;if(Array.isArray(n)){if(r)return n=B(e,n,s,t);B(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function se(e,t,n,s){let i=!1;for(let l=0,r=t.length;l<r;l++){let o=t[l],u=n&&n[l];if(o instanceof Node)e.push(o);else if(!(o==null||o===!0||o===!1))if(Array.isArray(o))i=se(e,o,u)||i;else if(typeof o=="function")if(s){for(;typeof o=="function";)o=o();i=se(e,Array.isArray(o)?o:[o],Array.isArray(u)?u:[u])||i}else e.push(o),i=!0;else{const c=String(o);u&&u.nodeType===3&&u.data===c?e.push(u):e.push(document.createTextNode(c))}}return i}function ue(e,t,n=null){for(let s=0,i=t.length;s<i;s++)e.insertBefore(t[s],n)}function B(e,t,n,s){if(n===void 0)return e.textContent="";const i=s||document.createTextNode("");if(t.length){let l=!1;for(let r=t.length-1;r>=0;r--){const o=t[r];if(i!==o){const u=o.parentNode===e;!l&&!r?u?e.replaceChild(i,o):e.insertBefore(i,n):u&&o.remove()}else l=!0}}else e.insertBefore(i,n);return[i]}const Be="1OZf35hceC_sSTTMxFut2467Y7Y2t8oCmMUbF3tNKTes",oe=`https://docs.google.com/spreadsheets/d/${Be}/gviz/tq?`,Se="Semester_1",Ue="1:1",be=["ENGSCI","FORSCI","COMPSCI","MATH","RONZ","OTAGO","SBS","SCIFAC"],De={"Summer Semester":"Summer","Semester One":"Semester_1","Semester Two":"Semester_2"},le=async e=>fetch(e).then(t=>t.text()).then(t=>JSON.parse(t.substring(47).slice(0,-2))),Pe=async()=>{const e=`${oe}&sheet=${Se}&range=${Ue}`;return(await le(e)).table.rows[0].c.map(i=>i.v).reduce((i,l,r)=>(l in i||(i[l]=[]),i[l].push(String.fromCharCode(r+65)),i),{})},ke=async e=>{const n=`select ${e.Staff.join(", ")}`,s=`${oe}&sheet=${Se}&tq=${encodeURIComponent(n)}`;let l=(await le(s)).table.rows.flatMap(r=>r.c.flatMap(o=>o?.v)).filter(r=>!be.includes(r)&&![null,void 0].includes(r));return l.sort().unshift("All"),Array.from(new Set(l))},Fe=async e=>{const{colNameDict:t,staff:n,semester:s}=e;if(!t||n===""||s==="")return{};const i=t.Staff,l=t.Weight,r=i.flatMap((a,d)=>[a,l[d]]),o=n==="All"?`select ${r.join(", ")}`:`select ${r.join(", ")} where ${i.join(` = "${n}" or `)} = "${n}"`;console.log(e);const u=`${oe}&sheet=${De[s]}&tq=${encodeURIComponent(o)}`;return(await le(u)).table.rows.reduce((a,d)=>{let m="";return d.c.forEach(b=>{typeof b?.v=="string"&&(m=b?.v),!be.includes(m)&&(n==="All"||m===n)&&typeof b?.v=="number"&&(m in a||(a[m]=0),a[m]+=b?.v)}),a},{})},He=K("<option>Loading...</option>"),Ke=K("<div><h1>Staff Allocations</h1><div><select><option selected disabled hidden>Select a semester</option><option>All </option><option>Summer Semester</option><option>Semester One</option><option>Semester Two</option></select></div><div><select></select></div><div><table><thead><tr> <th>Name</th> <th>Amount</th> </tr></thead><tbody></tbody></table></div></div>"),Ge=K("<option selected disabled hidden>Select staff member</option>"),Ve=K("<option></option>"),We=K("<tr> <td></td> <td></td></tr>"),Ye=()=>{const[e]=ee(Pe),[t]=ee(e,ke),[n,s]=I(""),[i,l]=I(""),r=()=>({colNameDict:e(),staff:n(),semester:i()}),o=async c=>Fe(c),[u]=ee(r,o);return ve(()=>console.log(r())),(()=>{const c=Ke.cloneNode(!0),f=c.firstChild,y=f.nextSibling,a=y.firstChild,d=y.nextSibling,m=d.firstChild,b=d.nextSibling,T=b.firstChild,O=T.firstChild,v=O.nextSibling;return a.addEventListener("change",h=>l(h.target.value)),m.addEventListener("change",h=>s(h.target.value)),L(m,H(Me,{get fallback(){return Ge.cloneNode(!0)},get children(){return H(qe,{get when(){return e.loading||t.loading},get children(){return He.cloneNode(!0)}})}}),null),L(m,H(ce,{get each(){return t()},children:h=>(()=>{const w=Ve.cloneNode(!0);return L(w,h),w})()}),null),L(v,H(ce,{get each(){return Object.entries(u()??{})},children:h=>(()=>{const w=We.cloneNode(!0),$=w.firstChild,R=$.nextSibling,P=R.nextSibling,k=P.nextSibling;return L(R,()=>h[0]),L(k,()=>h[1]),w})()})),c})()},Ze=document.getElementById("root");Re(()=>H(Ye,{}),Ze);
